<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>tracking-processes-lsof-fuser</title>
    <script
        src="../static/assets/category/application-8013fdc35e4c79f95bcb3d655ff61f137ac05bcee52e6d96588427a84eddef12.js.download"
        data-turbolinks-track="true"></script>
    <link rel="stylesheet" media="all"
        href="../static/assets/category/application-b0b91461d093aa2ed95d8a7467856e4dc16f55744d3c17a927c3598e5b26cd3f.css"
        data-turbolinks-track="true">
</head>

<body>
    <div id="wrapper" class="active">
        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul id="sidebar_menu" class="sidebar-nav">
                <li class="sidebar-brand"><a>Process Utilization</a>
                </li>
            </ul>
            <ul class="sidebar-nav" id="sidebar">
                
                <li>
                    <a class="" href="tracking-processes-top">
                        1. Tracking processes top</a>
                </li>
                
                <li>
                    <a class="current" href="tracking-processes-lsof-fuser">
                        2. Tracking processes lsof fuser</a>
                </li>
                
                <li>
                    <a class="" href="process-threads">
                        3. Process threads</a>
                </li>
                
                <li>
                    <a class="" href="cpu-monitoring">
                        4. Cpu monitoring</a>
                </li>
                
                <li>
                    <a class="" href="io-monitoring">
                        5. Io monitoring</a>
                </li>
                
                <li>
                    <a class="" href="memory-monitoring">
                        6. Memory monitoring</a>
                </li>
                
                <li>
                    <a class="" href="continuous-monitoring">
                        7. Continuous monitoring</a>
                </li>
                
                <li>
                    <a class="" href="cron-jobs">
                        8. Cron jobs</a>
                </li>
                
            </ul>
        </div>
        <!-- End of Sidebar -->


        <div id="page-content-wrapper">
            <!-- Keep all page content within the page-content inset div! -->
            <div class="page-content inset">
                <div class="row">
                    <div class="col-md-6 lesson">

                        <div class="user-app">
                            <a class="btn btn-default btn-sm" href="../index.html">
                                Home
                            </a>
                        </div>

                        <div class="lesson-content">
                            
<h3>lsof and fuser</h3>
<p>Let's say you plugged in a USB drive and starting working on some files, once you were done, you go and unmount the USB device and you're getting an error "Device or Resource Busy". How would you find out which files in the USB drive are still in use? There are actually two tools you can use for this: </p>
<p><b>lsof</b></p>
<p>Remember files aren't just text files, images, etc, they are everything on the system, disks, pipes, network sockets, devices, etc. To see what is in use by a process, you can use the lsof command (short for "list open files") this will show you a list of all the open files and their associated process. </p>
<pre>
pete@icebox:~$ lsof .
COMMAND    PID  USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
lxsession 1491 pete  cwd    DIR    8,6     4096  131 .
update-no 1796 pete  cwd    DIR    8,6     4096  131 .
nm-applet 1804 pete  cwd    DIR    8,6     4096  131 .
indicator 1809 pete  cwd    DIR    8,6     4096  131 .
xterm     2205 pete  cwd    DIR    8,6     4096  131 .
bash      2207 pete  cwd    DIR    8,6     4096  131 .
lsof      5914 pete  cwd    DIR    8,6     4096  131 .
lsof      5915 pete  cwd    DIR    8,6     4096  131 .
</pre>
<p>Now I can see what processes are currently holding the device/file open. In our USB example, you can also kill these processes so we can unmount this pesky drive.</p>
<p><b>fuser</b></p>
<p>Another way to track a process is the fuser command (short for "file user"), this will show you information about the process that is using the file or the file user. </p>
<pre>
pete@icebox:~$ fuser -v .
                     USER        PID ACCESS COMMAND
/home/pete:         pete  1491 ..c.. lxsession
                     pete  1796 ..c.. update-notifier
                     pete  1804 ..c.. nm-applet
                     pete  1809 ..c.. indicator-power
                     pete  2205 ..c.. xterm
                     pete  2207 ..c.. bash
</pre>
<p>We can see which processes are currently using our /home/pete directory. The lsof and fuser tools are very similar, familiarize yourself with these tools and try using them next time you need to track a file or process down.</p>

                        </div>
                    </div>

                    <div class="col-md-6 practice">
                        <div class="exercise-content">
                            <h3>Exercise</h3>
<p>Read the manpages for lsof and fuser, there is a lot of information that we didn't cover that allows you to have greater flexibility with these tools.</p>

                        </div>

                        <div class="quiz-content">
                            <h3>Quiz Question</h3>
<p>What command is used to list open files and their process information?</p>
<h3>Quiz Answer</h3>
<p>lsof</p>
</div>

                        </div>
                    </div>

                </div>
            </div>
        </div>

</body>

</html>