<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>kernel-modules</title>
    <script
        src="../static/assets/category/application-8013fdc35e4c79f95bcb3d655ff61f137ac05bcee52e6d96588427a84eddef12.js.download"
        data-turbolinks-track="true"></script>
    <link rel="stylesheet" media="all"
        href="../static/assets/category/application-b0b91461d093aa2ed95d8a7467856e4dc16f55744d3c17a927c3598e5b26cd3f.css"
        data-turbolinks-track="true">
</head>

<body>
    <div id="wrapper" class="active">
        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul id="sidebar_menu" class="sidebar-nav">
                <li class="sidebar-brand"><a>Kernel</a>
                </li>
            </ul>
            <ul class="sidebar-nav" id="sidebar">
                
                <li>
                    <a class="" href="kernel-overview.html">
                        1. Kernel overview</a>
                </li>
                
                <li>
                    <a class="" href="kernel-privilege-levels.html">
                        2. Kernel privilege levels</a>
                </li>
                
                <li>
                    <a class="" href="system-calls.html">
                        3. System calls</a>
                </li>
                
                <li>
                    <a class="" href="kernel-installation.html">
                        4. Kernel installation</a>
                </li>
                
                <li>
                    <a class="" href="kernel-location.html">
                        5. Kernel location</a>
                </li>
                
                <li>
                    <a class="current" href="kernel-modules.html">
                        6. Kernel modules</a>
                </li>
                
            </ul>
        </div>
        <!-- End of Sidebar -->


        <div id="page-content-wrapper">
            <!-- Keep all page content within the page-content inset div! -->
            <div class="page-content inset">
                <div class="row">
                    <div class="col-md-6 lesson">

                        <div class="user-app">
                            <a class="btn btn-default btn-sm" href="../index.html">
                                Home
                            </a>
                        </div>

                        <div class="lesson-content">
                            
<h3>Kernel Modules</h3>
<p>Let's say I have a sweet ride, I invest a lot of time and money into it. I add a spoiler, hitch, bike rack and other random things. These components don't actually change the core functionality of the car and I can remove and add them very easily. The kernel uses the same concept with kernel modules.</p>
<p>The kernel in itself is a monolithic piece of software, when we want to add support for a new type of keyboard, we don't write this code directly into the kernel code. Just as we wouldn't meld a bike rack to our car (well maybe some people would do that). Kernel modules are pieces of code that can be loaded and unloaded into the kernel on demand. They allow us to extend the functionality of the kernel without actually adding to the core kernel code. We can also add modules and not have to reboot the system (in most cases).</p>
<p><b>View a list of currently loaded modules</b></p>
<pre>$ lsmod</pre>
<p><b>Load a module</b></p>
<pre>$ sudo modprobe bluetooth</pre>
<p>Modprobe loads tries the module from <b>/lib/modules/(kernel version)/kernel/drivers</b>. Kernel modules may also have dependencies, modprobe loads our module dependencies if they are not already loaded. </p>
<p><b>Remove a module</b></p>
<pre>$ sudo modprobe -r bluetooth</pre>
<p><b>Load on bootup</b></p>
<p>You can also load modules during system boot, instead of temporarily loading them with modprobe (which will be unloaded when you reboot). Just modify the <b>/etc/modprobe.d</b> directory and add a configuration file in it like so:</p>
<pre>pete@icebox:~$ /etc/modprobe.d/peanutbutter.conf

options peanut_butter type=almond
</pre>
<p>A bit of a outlandish example, but if you had a module named peanut_butter and you wanted to add a kernel parameter for type=almond, you can have it load on startup using this configuration file. Also note that kernel modules have their own kernel parameters so you'll want to read about the module specifically to find out more.</p>
<p><b>Do not load on bootup</b></p>
<p>You can also make sure a module does not load on bootup by adding a configuration file like so:</p>
<pre>pete@icebox:~$ /etc/modprobe.d/peanutbutter.conf

blacklist peanut_butter
</pre>

                        </div>
                    </div>

                    <div class="col-md-6 practice">
                        <div class="exercise-content">
                            <h3>Exercise</h3>
<p>Unload your bluetooth module with modprobe and see what happens. How will you fix this?</p>

                        </div>

                        <div class="quiz-content">
                            <h3>Quiz Question</h3>
<p>What command is used to unload a module?</p>
<h3>Quiz Answer</h3>
<p>modprobe -r</p>
</div>

                        </div>
                    </div>

                </div>
            </div>
        </div>

</body>

</html>